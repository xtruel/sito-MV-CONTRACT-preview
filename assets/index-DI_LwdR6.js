(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function l(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(e){if(e.ep)return;e.ep=!0;const r=l(e);fetch(e.href,r)}})();(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("burger"),c=document.getElementById("mobile"),l=document.getElementById("year"),t=document.getElementById("contactForm"),e=document.getElementById("formHint"),r=document.querySelectorAll(".reveal");l&&(l.textContent=String(new Date().getFullYear()));const d=i=>{const o=i!==void 0?i:s.getAttribute("aria-expanded")==="false";s.setAttribute("aria-expanded",String(o)),c.classList.toggle("active",o);const n=s.querySelectorAll("span");o?(n[0].style.transform="rotate(45deg) translate(5px, 5px)",n[1].style.opacity="0",n[2].style.transform="rotate(-45deg) translate(7px, -7px)"):(n[0].style.transform="none",n[1].style.opacity="1",n[2].style.transform="none")};s==null||s.addEventListener("click",()=>d()),c==null||c.querySelectorAll("a").forEach(i=>{i.addEventListener("click",()=>d(!1))}),document.querySelectorAll('a[href^="#"]').forEach(i=>{i.addEventListener("click",function(o){const n=this.getAttribute("href");if(n==="#")return;const a=document.querySelector(n);if(a){o.preventDefault();const u=a.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:u,behavior:"smooth"})}})});const p=new IntersectionObserver(i=>{i.forEach(o=>{o.isIntersecting&&(o.target.classList.add("active"),p.unobserve(o.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});r.forEach(i=>p.observe(i)),t==null||t.addEventListener("submit",i=>{i.preventDefault(),e.textContent="Sto elaborando...",e.style.color="var(--accent)";const o=new FormData(t),n=o.get("name"),a=o.get("email"),u=o.get("message");if(!n||!a||!u){e.textContent="Tutti i campi sono obbligatori.",e.style.color="#ff4d4d";return}const f=encodeURIComponent(`Richiesta Consulenza - ${n}`),m=encodeURIComponent(`Nome: ${n}
Email: ${a}

Messaggio:
${u}`);setTimeout(()=>{window.location.href=`mailto:info@mcontract.it?subject=${f}&body=${m}`,e.textContent="Apertura client email in corso...",t.reset()},1e3)});const g=document.querySelector(".hero__visual");g&&document.addEventListener("mousemove",i=>{const{clientX:o,clientY:n}=i,{innerWidth:a,innerHeight:u}=window,f=(o-a/2)/50,m=(n-u/2)/50;g.style.transform=`perspective(1000px) rotateY(${f}deg) rotateX(${-m}deg)`})});
